var stationMap=function(){function e(c){if(d(c))return!1;var g=f[c],b;for(b in g)animPng.addMarker(c,g[b][0],g[b][1]);a.push(c)}function d(c){var b=a.indexOf(c);if(-1==b)return!1;a.splice(b,1);b=animPng.getOptions().markerBox;jQuery(b+" .st"+c).remove();return!0}function b(c){c=c.originalEvent.target.href;var a=c.lastIndexOf("#")+1;c=c.substr(a);e(c);return!1}var f={1:[[358,617]],2:[[520,719],[498,719]],3:[[472,591],[472,569]],4:[[361,573],[376,558]],5:[[555,271],[533,271]],6:[[509,227],[494,242]],
7:[[268,259],[286,271]],8:[[517,440],[495,440]],9:[[250,480],[232,494],[232,464]],10:[[65,399],[43,399]],11:[[564,811]],12:[[549,797]],13:[[535,779]],14:[[518,742]],15:[[518,763]],16:[[627,726]],17:[[469,719]],18:[[435,719]],19:[[517,694]],20:[[517,667]],21:[[517,643]],22:[[397,854]],23:[[432,818]],24:[[432,798]],25:[[433,778]],26:[[433,758]],27:[[414,739]],28:[[413,719]],29:[[413,699]],30:[[413,680]],31:[[439,656]],32:[[439,631]],33:[[439,601]],34:[[439,579]],35:[[426,529]],36:[[447,519],[427,506]],
37:[[296,511],[278,523]],38:[[196,659]],39:[[210,644]],40:[[227,627]],41:[[257,596]],42:[[278,574]],43:[[292,684]],44:[[308,666]],45:[[324,650]],46:[[342,633]],47:[[276,700]],48:[[258,718]],49:[[259,735]],50:[[258,756]],51:[[273,772]],52:[[289,791]],53:[[195,718]],54:[[373,513]],55:[[318,491]],56:[[579,518]],57:[[558,507],[578,495]],58:[[588,425],[611,425]],59:[[599,445]],60:[[181,419]],61:[[234,359]],62:[[139,374]],63:[[594,126]],64:[[546,126]],65:[[502,126]],66:[[453,126]],67:[[363,126],[347,133]],
68:[[408,124]],69:[[693,745]],70:[[692,694]],71:[[692,661]],72:[[627,749]],73:[[627,701]],74:[[627,679]],75:[[627,655]],76:[[627,633]],77:[[627,604]],78:[[627,566]],79:[[692,609]],80:[[658,574]],81:[[627,544]],82:[[626,517]],83:[[626,495]],84:[[677,487]],85:[[712,453]],86:[[713,434]],87:[[713,414]],88:[[634,404]],89:[[665,374]],90:[[691,349]],91:[[691,324]],92:[[690,296]],93:[[690,267]],94:[[690,240]],95:[[623,81]],96:[[623,50]],97:[[623,20]],98:[[581,248]],99:[[602,225]],100:[[626,201]],101:[[653,
176]],102:[[653,145]],103:[[623,112]],104:[[593,142]],105:[[563,173]],106:[[513,293]],107:[[534,203]],108:[[438,208]],109:[[493,264]],110:[[439,287]],111:[[416,287]],112:[[364,229]],113:[[347,213]],114:[[438,188]],115:[[347,162]],116:[[347,186]],117:[[364,26]],118:[[364,80]],119:[[364,44]],120:[[364,61]],121:[[347,95]],122:[[250,238]],123:[[230,219]],124:[[212,202]],125:[[212,172]],126:[[212,132]],127:[[212,153]],128:[[161,205]],129:[[161,177]],130:[[161,238]],131:[[161,264]],132:[[161,289]],133:[[178,
307]],134:[[204,332]],135:[[218,345]],136:[[331,318]],137:[[256,358]],138:[[349,363]],139:[[372,363]],140:[[361,343]],141:[[472,325]],142:[[491,313]],143:[[492,336]],144:[[445,364]],145:[[461,379]],146:[[441,429]],147:[[425,413]],148:[[410,398]],149:[[361,414]],150:[[285,412]],151:[[320,411]],152:[[346,429]],153:[[125,456]],154:[[147,506]],155:[[156,489]],156:[[141,473]],157:[[376,429]],158:[[361,445]],159:[[299,427]],160:[[68,429],[182,513]],161:[[96,430]],162:[[82,416]],163:[[43,345]],164:[[43,
319]],165:[[43,290]],166:[[43,259]],167:[[43,221]],168:[[43,185]]},a=[];return{init:function(a){jQuery(a.mapBox).click(b)},removeClick:function(a){d(a.currentTarget.stationId);return!1},selectStation:e,getStationSelect:function(){return a},setStationSelect:function(a){for(var b in a)e(a[b])},clearSelect:function(){a=[]}}}();
function animFrame(e){var d=0,b=0,f=0;this.nextFrame=function(a){if(f==a.frameCount){var c=(d-1)*a.frameWidth,g=b*a.frameHeight,j=(a.frameWidth-a.markerDia)/2,h=(a.frameHeight-a.markerDia)/2;a={"background-position":"-"+(c+j)+"px -"+(g+h)+"px",width:a.markerDia+"px",height:a.markerDia+"px",left:parseInt(e.style.left)+j+"px",top:parseInt(e.style.top)+h+"px"};jQuery(e).css(a);++f;return!1}if(f>a.frameCount)return!1;d>=a.frameXCount&&(d=0,++b);c=d*a.frameWidth;g=b*a.frameHeight;jQuery(e).css("background-position",
"-"+c+"px -"+g+"px");++d;++f;return!0}}
var animPng=function(){function e(){b=!1;for(var c in f)b=f[c].nextFrame(a)||b;if(b=!b)f=[],clearInterval(d)}var d,b=!0,f=[],a={frameXCount:1,frameYCount:1,markerClass:"marker",markerBox:"#markerBox",frameWidth:100,frameHeight:100,markerDia:24,frameCount:null};return{init:function(b){$.extend(a,b);with(a)frameCount||(frameCount=frameXCount*frameYCount)},addMarker:function(c,g,j){g-=a.frameWidth/2;j-=a.frameHeight/2;var h=document.createElement("div");h.className=a.markerClass+" st"+c;h.style.left=
g+"px";h.style.top=j+"px";h.stationId=c;h.onclick=stationMap.removeClick;jQuery(markerBox).append(h);f.push(new animFrame(h));b&&(d=window.setInterval(e,41),b=!1)},getOptions:function(){return a},clearAll:function(){f=[];clearInterval(d);jQuery(a.markerBox+" ."+a.markerClass).remove();stationMap.clearSelect()}}}();jQuery(document).ready(function(){stationMap.init({mapBox:"#stationCoor"});animPng.init({frameXCount:3,frameYCount:4})});
var explorerMvc=function(){function e(){explorerMvc.onCallback(stationMap.getStationSelect());window.close()}var d;return{init:function(){d=new findBtn("#findDrop",function(){if(this.selected){var b=this.selected.id.substr(4);stationMap.selectStation(b)}});jQuery("#findIcon").click(function(){d.select();d.click()});jQuery("#clearBtn").click(animPng.clearAll);jQuery("#selectBtn").click(e)},initData:function(b){console.log(b);stationMap.setStationSelect(b.list)}}}();jQuery(function(){explorerMvc.init()}); 